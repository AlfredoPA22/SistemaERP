@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="row">
        <div class="col-sm-2">
            <div class="card">
                <div class="card-body" style="height:200px;">
                    <a href="@Url.Action("Index", "Cliente")" style="width:100%; height:100%" class="btn btn-info">
                        CLIENTES <svg xmlns="http://www.w3.org/2000/svg" width="80%" height="80%" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-sm-2">
            <div class="card">
                <div class="card-body" style="height:200px;">
                    <a href="@Url.Action("Index", "Vendedor")" style="width:100%; height:100%;" class="btn btn-info">
                        VENDEDORES  <svg xmlns="http://www.w3.org/2000/svg" width="80%" height="80%" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="card">
                <div class="card-body" style="height:200px;">
                    <a href="@Url.Action("Index", "Proveedor")" style="width:100%; height:100%" class="btn btn-info">
                        PROVEEDORES <svg xmlns="http://www.w3.org/2000/svg" width="80%" height="80%" fill="currentColor" class="bi bi-basket3-fill" viewBox="0 0 16 16">
                            <path d="M5.757 1.071a.5.5 0 0 1 .172.686L3.383 6h9.234L10.07 1.757a.5.5 0 1 1 .858-.514L13.783 6H15.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H.5a.5.5 0 0 1-.5-.5v-1A.5.5 0 0 1 .5 6h1.717L5.07 1.243a.5.5 0 0 1 .686-.172zM2.468 15.426.943 9h14.114l-1.525 6.426a.75.75 0 0 1-.729.574H3.197a.75.75 0 0 1-.73-.574z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="card">
                <div class="card-body" style="height:200px;">
                    <a href="@Url.Action("Nota", "Nota")" style="width:100%; height:100%" class="btn btn-success">
                        COMPRAR <svg xmlns="http://www.w3.org/2000/svg" width="80%" height="80%" fill="currentColor" class="bi bi-bag-fill" viewBox="0 0 16 16">
                            <path d="M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>

        <div class="col-sm-2">
            <div class="card">
                <div class="card-body" style="height:200px;">
                    <a href="@Url.Action("NotaVenta", "Nota")" style="width:100%; height:100%" class="btn btn-success">
                        VENDER <svg xmlns="http://www.w3.org/2000/svg" width="80%" height="80%" fill="currentColor" class="bi bi-shop" viewBox="0 0 16 16">
                            <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-sm-2">
            <div class="card">
                <div class="card-body" style="height:200px;">
                    <a href="@Url.Action("Index", "Articulo")" style="width:100%; height:100%" class="btn btn-primary">
                        PRODUCTOS <svg xmlns="http://www.w3.org/2000/svg" width="80%" height="80%" fill="currentColor" class="bi bi-box-seam-fill" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M15.528 2.973a.75.75 0 0 1 .472.696v8.662a.75.75 0 0 1-.472.696l-7.25 2.9a.75.75 0 0 1-.557 0l-7.25-2.9A.75.75 0 0 1 0 12.331V3.669a.75.75 0 0 1 .471-.696L7.443.184l.01-.003.268-.108a.75.75 0 0 1 .558 0l.269.108.01.003 6.97 2.789ZM10.404 2 4.25 4.461 1.846 3.5 1 3.839v.4l6.5 2.6v7.922l.5.2.5-.2V6.84l6.5-2.6v-.4l-.846-.339L8 5.961 5.596 5l6.154-2.461L10.404 2Z" />
                        </svg>
                    </a>
                </div>
            </div>
        </div>

    </div>
    <div class="col-lg-6" style="margin-top:10px;">
        <div class="panel panel-default">
            <div class="panel-heading"><b>Ventas por Periodo</b></div>
            <div class="panel-body">
                <canvas id="myBarChart" width="50" height="20"></canvas>
            </div>
        </div>
        <br />


    </div>
    <div class="col-lg-6" style="margin-top:10px;">
        <div class="panel panel-default">
            <div class="panel-heading"><b>Productos con bajo Stock</b></div>
            <div class="panel-body">
                <canvas id="myBarChart2" width="50" height="20"></canvas>
            </div>

        </div>
    </div>
    @*<div class="col-lg-6" style="margin-top:10px;">
            <div class="panel panel-default">
                <div class="panel-heading"><b>Productos con mas movimiento</b></div>
                <div class="panel-body">
                    <canvas id="myBarChart3" width="100" height="10"></canvas>
                </div>

            </div>
        </div>*@

</div>

    @section scripts{
        <script src="@Url.Content("~/Scripts/chart.js")"></script>

        <script type="text/javascript">
        function graficos() {
            var div1 = document.getElementById("myBarChart");
            $.ajax({
                url: "@Url.Action("ObtenerVentasPorEmpresa", "Nota")",
                cache: false,
                type: "POST",
                dataType: "json",
                data: {

                }, success: function (result) {

                    let lista = [];
                    let lista2 = [];

                    result.Data.Periodo.forEach((item) => { //Recorro primer arreglo

                        lista.push(item.Descripcion);

                    });
                    result.Data.Nota.forEach((item) => { //Recorro primer arreglo

                        lista2.push(item.Total);

                    });

                    var grafico1 = new Chart(div1, {
                        type: 'line',
                        data: {
                            labels: lista,
                            datasets: [{
                                label: 'ventas',
                                data: lista2,
                                backgroundColor: [
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(75, 192, 192, 0.2)',
                                    'rgba(255, 159, 64, 0.2)'
                                ],
                                borderColor: [
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(75, 192, 192, 1)',
                                    'rgba(255, 159, 64, 1)'
                                ],
                                borderWidth: 6
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }

                    });

                }

            });

        }
        function graficos2() {
            var div2 = document.getElementById("myBarChart2");
            $.ajax({
                url: "@Url.Action("ObtenerProductosBajosPorEmpresa", "Nota")",
                cache: false,
                type: "POST",
                dataType: "json",
                data: {

                }, success: function (result) {
                    let lista = [];
                    let lista2 = [];

                    result.Data.Producto.forEach((item) => { //Recorro primer arreglo

                        lista.push(item.Descripcion);

                    });
                    result.Data.Producto.forEach((item) => { //Recorro primer arreglo

                        lista2.push(item.Stock);

                    });
                    var grafico1 = new Chart(div2, {
                        type: 'bar',
                        data: {
                            labels: lista,
                            datasets: [{
                                label: 'Cantidad',
                                data: lista2,
                                backgroundColor: [
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(75, 192, 192, 0.2)',
                                    'rgba(255, 159, 64, 0.2)'
                                ],
                                borderColor: [
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(75, 192, 192, 1)',
                                    'rgba(255, 159, 64, 1)'
                                ],
                                borderWidth: 6
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }

                    });

                }

            });

        }
        @*function graficos3() {
            var div2 = document.getElementById("myBarChart3");
            $.ajax({
                url: "@Url.Action("ObtenerProductosBajosPorEmpresa", "Nota")",
                cache: false,
                type: "POST",
                dataType: "json",
                data: {

                }, success: function (result) {
                    let lista = [];
                    let lista2 = [];

                    result.Data.Producto.forEach((item) => { //Recorro primer arreglo

                        lista.push(item.Descripcion);

                    });
                    result.Data.Producto.forEach((item) => { //Recorro primer arreglo

                        lista2.push(item.Stock);

                    });
                    var grafico1 = new Chart(div2, {
                        type: 'pie',
                        data: {
                            labels: lista,
                            datasets: [{
                                label: 'Cantidad',
                                data: [8000,12000,13500,20000,18000],
                                backgroundColor: [
                                    'rgb(255, 99, 132)',
                                    'rgb(54, 162, 235)',
                                    'rgb(255, 205, 86)',
                                    'rgb(98, 245, 163)'
                                ],
                                hoverOffset: 4
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }

                    });

                }

            });

        }*@

        $(document).ready(function () {
            graficos();
            graficos2();
        });
        </script>
    }

